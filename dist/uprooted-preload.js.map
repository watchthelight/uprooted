{
  "version": 3,
  "sources": ["../src/api/css.ts", "../src/core/pluginLoader.ts", "../src/api/bridge.ts", "../src/plugins/sentry-blocker/index.ts", "../src/plugins/silent-typing/index.ts", "../src/api/native.ts", "../src/plugins/themes/themes.json", "../src/plugins/themes/index.ts", "../src/plugins/settings-panel/components.ts", "../src/plugins/settings-panel/panel.ts", "../src/plugins/settings-panel/index.ts", "../src/plugins/link-embeds/providers.ts", "../src/plugins/link-embeds/embeds.ts", "../src/plugins/link-embeds/index.ts", "../src/core/preload.ts"],
  "sourcesContent": ["/**\n * CSS Injection -- Runtime injection and removal of CSS stylesheets.\n *\n * Each injection is identified by an ID so it can be individually removed.\n * Uses <style> elements appended to <head>.\n */\n\nconst ID_PREFIX = \"uprooted-css-\";\n\n/**\n * Inject a CSS string into the page. If a style with the same ID already exists,\n * it will be replaced.\n */\nexport function injectCss(id: string, css: string): void {\n  const elementId = ID_PREFIX + id;\n  let style = document.getElementById(elementId) as HTMLStyleElement | null;\n\n  if (!style) {\n    style = document.createElement(\"style\");\n    style.id = elementId;\n    document.head.appendChild(style);\n  }\n\n  style.textContent = css;\n}\n\n/**\n * Remove a previously injected CSS by ID.\n */\nexport function removeCss(id: string): void {\n  const elementId = ID_PREFIX + id;\n  const style = document.getElementById(elementId);\n  style?.remove();\n}\n\n/**\n * Remove all Uprooted-injected CSS from the page.\n */\nexport function removeAllCss(): void {\n  const styles = document.querySelectorAll(`style[id^=\"${ID_PREFIX}\"]`);\n  for (const style of styles) {\n    style.remove();\n  }\n}\n", "/**\n * Plugin Loader -- Discovers, validates, and manages the lifecycle of plugins.\n */\n\nimport type { UprootedPlugin, Patch } from \"../types/plugin.js\";\nimport type { UprootedSettings } from \"../types/settings.js\";\nimport { injectCss, removeCss } from \"../api/css.js\";\n\ntype BridgeEventName = \"bridge:nativeToWebRtc\" | \"bridge:webRtcToNative\";\n\nexport interface BridgeEvent {\n  method: string;\n  args: unknown[];\n  cancelled: boolean;\n  returnValue?: unknown;\n}\n\ntype EventHandler = (event: BridgeEvent) => void | Promise<void>;\n\nexport class PluginLoader {\n  private plugins = new Map<string, UprootedPlugin>();\n  private activePlugins = new Set<string>();\n  private eventHandlers = new Map<string, EventHandler[]>();\n  private settings: UprootedSettings;\n\n  constructor(settings: UprootedSettings) {\n    this.settings = settings;\n  }\n\n  /** Register a plugin. Does not start it. */\n  register(plugin: UprootedPlugin): void {\n    if (this.plugins.has(plugin.name)) {\n      console.warn(`[Uprooted] Plugin \"${plugin.name}\" already registered, skipping.`);\n      return;\n    }\n    this.plugins.set(plugin.name, plugin);\n  }\n\n  /** Start a single plugin by name. */\n  async start(name: string): Promise<void> {\n    const plugin = this.plugins.get(name);\n    if (!plugin) {\n      console.error(`[Uprooted] Plugin \"${name}\" not found.`);\n      return;\n    }\n\n    if (this.activePlugins.has(name)) return;\n\n    try {\n      // Install patches\n      if (plugin.patches) {\n        for (const patch of plugin.patches) {\n          this.installPatch(name, patch);\n        }\n      }\n\n      // Inject CSS\n      if (plugin.css) {\n        injectCss(`plugin-${name}`, plugin.css);\n      }\n\n      // Call start lifecycle hook\n      await plugin.start?.();\n\n      this.activePlugins.add(name);\n      console.log(`[Uprooted] Started plugin: ${name}`);\n    } catch (err) {\n      console.error(`[Uprooted] Failed to start plugin \"${name}\":`, err);\n    }\n  }\n\n  /** Stop a single plugin by name. */\n  async stop(name: string): Promise<void> {\n    const plugin = this.plugins.get(name);\n    if (!plugin || !this.activePlugins.has(name)) return;\n\n    try {\n      await plugin.stop?.();\n\n      // Remove CSS\n      if (plugin.css) {\n        removeCss(`plugin-${name}`);\n      }\n\n      // Remove event handlers for this plugin\n      this.removeHandlers(name);\n\n      this.activePlugins.delete(name);\n      console.log(`[Uprooted] Stopped plugin: ${name}`);\n    } catch (err) {\n      console.error(`[Uprooted] Failed to stop plugin \"${name}\":`, err);\n    }\n  }\n\n  /** Start all plugins that are enabled in settings. */\n  async startAll(): Promise<void> {\n    for (const [name] of this.plugins) {\n      const pluginSettings = this.settings.plugins[name];\n      const enabled = pluginSettings?.enabled ?? false;\n      if (enabled) {\n        await this.start(name);\n      }\n    }\n  }\n\n  /** Emit a bridge event. Called by the bridge proxy. */\n  emit(eventName: BridgeEventName, event: BridgeEvent): void {\n    const key = `${eventName}:${event.method}`;\n    const handlers = this.eventHandlers.get(key);\n    if (handlers) {\n      for (const handler of handlers) {\n        handler(event);\n        if (event.cancelled) break;\n      }\n    }\n  }\n\n  private installPatch(pluginName: string, patch: Patch): void {\n    const eventName: BridgeEventName =\n      patch.bridge === \"nativeToWebRtc\"\n        ? \"bridge:nativeToWebRtc\"\n        : \"bridge:webRtcToNative\";\n\n    const key = `${eventName}:${patch.method}`;\n    const handler: EventHandler & { __plugin?: string } = (event) => {\n      if (patch.replace) {\n        event.returnValue = patch.replace(...event.args);\n        event.cancelled = true;\n      } else if (patch.before) {\n        const result = patch.before(event.args);\n        if (result === false) event.cancelled = true;\n      }\n    };\n    handler.__plugin = pluginName;\n\n    const handlers = this.eventHandlers.get(key) ?? [];\n    handlers.push(handler);\n    this.eventHandlers.set(key, handlers);\n  }\n\n  private removeHandlers(pluginName: string): void {\n    for (const [key, handlers] of this.eventHandlers) {\n      const filtered = handlers.filter(\n        (h) => (h as EventHandler & { __plugin?: string }).__plugin !== pluginName,\n      );\n      if (filtered.length === 0) {\n        this.eventHandlers.delete(key);\n      } else {\n        this.eventHandlers.set(key, filtered);\n      }\n    }\n  }\n}\n", "/**\n * Bridge Proxy -- Wraps Root's bridge globals with ES6 Proxies so plugins\n * can intercept, modify, or cancel bridge method calls.\n *\n * Root exposes two bridge objects on `window`:\n *   - __nativeToWebRtc (Native \u2192 WebRTC): C# host controlling the WebRTC session\n *   - __webRtcToNative (WebRTC \u2192 Native): JS notifying the native host of state changes\n *\n * This module replaces both with Proxy wrappers before Root's bundles access them.\n */\n\nimport type { INativeToWebRtc, IWebRtcToNative } from \"../types/bridge.js\";\nimport type { PluginLoader, BridgeEvent } from \"../core/pluginLoader.js\";\n\nlet pluginLoader: PluginLoader | null = null;\n\nexport function setPluginLoader(loader: PluginLoader): void {\n  pluginLoader = loader;\n}\n\nfunction createBridgeProxy<T extends object>(\n  target: T,\n  eventPrefix: \"bridge:nativeToWebRtc\" | \"bridge:webRtcToNative\",\n): T {\n  return new Proxy(target, {\n    get(obj, prop, receiver) {\n      const original = Reflect.get(obj, prop, receiver);\n      if (typeof original !== \"function\") return original;\n\n      return (...args: unknown[]) => {\n        const event: BridgeEvent = {\n          method: String(prop),\n          args,\n          cancelled: false,\n        };\n\n        pluginLoader?.emit(eventPrefix, event);\n\n        if (event.cancelled) {\n          return event.returnValue;\n        }\n\n        return (original as Function).apply(obj, event.args);\n      };\n    },\n  });\n}\n\nexport function installBridgeProxy(): void {\n  // Wait for the bridge objects to be set, then proxy them.\n  // Root may set them asynchronously after page load.\n\n  const tryProxy = () => {\n    if (window.__nativeToWebRtc) {\n      const original = window.__nativeToWebRtc;\n      window.__nativeToWebRtc = createBridgeProxy<INativeToWebRtc>(\n        original,\n        \"bridge:nativeToWebRtc\",\n      );\n      console.log(\"[Uprooted] Proxied __nativeToWebRtc\");\n    }\n\n    if (window.__webRtcToNative) {\n      const original = window.__webRtcToNative;\n      window.__webRtcToNative = createBridgeProxy<IWebRtcToNative>(\n        original,\n        \"bridge:webRtcToNative\",\n      );\n      console.log(\"[Uprooted] Proxied __webRtcToNative\");\n    }\n  };\n\n  // Try immediately\n  tryProxy();\n\n  // Also set up defineProperty traps for lazy assignment\n  const originalNtw = Object.getOwnPropertyDescriptor(window, \"__nativeToWebRtc\");\n  const originalWtn = Object.getOwnPropertyDescriptor(window, \"__webRtcToNative\");\n\n  if (!originalNtw?.value) {\n    let _ntw: INativeToWebRtc | undefined;\n    Object.defineProperty(window, \"__nativeToWebRtc\", {\n      get: () => _ntw,\n      set: (val: INativeToWebRtc) => {\n        _ntw = createBridgeProxy(val, \"bridge:nativeToWebRtc\");\n        console.log(\"[Uprooted] Proxied __nativeToWebRtc (deferred)\");\n      },\n      configurable: true,\n    });\n  }\n\n  if (!originalWtn?.value) {\n    let _wtn: IWebRtcToNative | undefined;\n    Object.defineProperty(window, \"__webRtcToNative\", {\n      get: () => _wtn,\n      set: (val: IWebRtcToNative) => {\n        _wtn = createBridgeProxy(val, \"bridge:webRtcToNative\");\n        console.log(\"[Uprooted] Proxied __webRtcToNative (deferred)\");\n      },\n      configurable: true,\n    });\n  }\n}\n", "/**\n * Sentry Blocker -- Blocks Sentry error tracking to protect user privacy.\n *\n * Root sends telemetry to Sentry (o4509469920133120.ingest.us.sentry.io) with:\n *   - sendDefaultPii: true (IP addresses on every event)\n *   - replaysOnErrorSampleRate: 0.25 (DOM replays: mouse, inputs, snapshots)\n *   - tracesSampleRate: 0.025 (page load traces)\n *   - enableLogs (production logs)\n *   - Auth headers (Bearer tokens) in request breadcrumbs\n *\n * This plugin intercepts fetch, XMLHttpRequest, and sendBeacon to block all\n * requests to *.sentry.io. Fetch-level blocking is used instead of Sentry.init\n * override because Sentry initializes at module evaluation time in Root's bundle.\n */\n\nimport type { UprootedPlugin } from \"../../types/plugin.js\";\n\nlet originalFetch: typeof window.fetch | null = null;\nlet originalXHROpen: typeof XMLHttpRequest.prototype.open | null = null;\nlet originalSendBeacon: typeof navigator.sendBeacon | null = null;\nlet blockedCount = 0;\n\nfunction isSentryUrl(url: string | URL | Request): boolean {\n  const urlStr = typeof url === \"string\" ? url : url instanceof URL ? url.href : url.url;\n  return urlStr.includes(\"sentry.io\");\n}\n\nconst sentryBlockerPlugin: UprootedPlugin = {\n  name: \"sentry-blocker\",\n  description: \"Blocks Sentry error tracking to protect your privacy\",\n  version: \"0.3.6-rc\",\n  authors: [{ name: \"Uprooted\" }],\n\n  start() {\n    blockedCount = 0;\n\n    // Wrap fetch\n    originalFetch = window.fetch;\n    window.fetch = function (input: RequestInfo | URL, init?: RequestInit): Promise<Response> {\n      if (isSentryUrl(input)) {\n        blockedCount++;\n        console.log(`[Uprooted:sentry-blocker] Blocked fetch to sentry.io (${blockedCount} total)`);\n        return Promise.resolve(new Response(null, { status: 200 }));\n      }\n      return originalFetch!.call(window, input, init);\n    };\n\n    // Wrap XMLHttpRequest.open\n    originalXHROpen = XMLHttpRequest.prototype.open;\n    XMLHttpRequest.prototype.open = function (\n      method: string,\n      url: string | URL,\n      ...rest: any[]\n    ) {\n      if (isSentryUrl(url)) {\n        blockedCount++;\n        console.log(`[Uprooted:sentry-blocker] Blocked XHR to sentry.io (${blockedCount} total)`);\n        // Point to an invalid URL so send() is a no-op\n        return originalXHROpen!.call(this, method, \"about:blank\", ...rest);\n      }\n      return originalXHROpen!.call(this, method, url, ...rest);\n    };\n\n    // Wrap sendBeacon\n    originalSendBeacon = navigator.sendBeacon.bind(navigator);\n    navigator.sendBeacon = function (url: string | URL, data?: BodyInit | null): boolean {\n      if (isSentryUrl(url)) {\n        blockedCount++;\n        console.log(`[Uprooted:sentry-blocker] Blocked sendBeacon to sentry.io (${blockedCount} total)`);\n        return true;\n      }\n      return originalSendBeacon!(url, data);\n    };\n\n    console.log(\"[Uprooted:sentry-blocker] Network intercepts installed\");\n  },\n\n  stop() {\n    if (originalFetch) {\n      window.fetch = originalFetch;\n      originalFetch = null;\n    }\n    if (originalXHROpen) {\n      XMLHttpRequest.prototype.open = originalXHROpen;\n      originalXHROpen = null;\n    }\n    if (originalSendBeacon) {\n      navigator.sendBeacon = originalSendBeacon;\n      originalSendBeacon = null;\n    }\n    console.log(`[Uprooted:sentry-blocker] Intercepts removed (blocked ${blockedCount} requests)`);\n    blockedCount = 0;\n  },\n};\n\nexport default sentryBlockerPlugin;\n", "import type { UprootedPlugin } from \"../../types/plugin.js\";\n\nlet originalFetch: typeof window.fetch | null = null;\nlet originalXHROpen: typeof XMLHttpRequest.prototype.open | null = null;\n\nfunction isTypingIndicatorUrl(url: string | URL | Request): boolean {\n  const urlStr = typeof url === \"string\" ? url : url instanceof URL ? url.href : url.url;\n  return urlStr.includes(\"api.rootapp.com/root.v2.MessageGrpcService/SetTypingIndicator\");\n}\n\nconst silentTypingPlugin: UprootedPlugin = {\n  name: \"silent-typing\",\n  description: \"Hide that you are typing\",\n  version: \"0.1.0\",\n  authors: [{ name: \"Kurumi Nanase\" }],\n\n  start() {\n    originalFetch = window.fetch;\n    window.fetch = function (input: RequestInfo | URL, init?: RequestInit): Promise<Response> {\n      if (isTypingIndicatorUrl(input)) {\n        console.log(`[Uprooted:Silent typing] Blocked typing indicator`);\n        return Promise.resolve(new Response(null, { status: 200 }));\n      }\n      return originalFetch!.call(window, input, init);\n    };\n\n    originalXHROpen = XMLHttpRequest.prototype.open;\n    XMLHttpRequest.prototype.open = function (\n      method: string,\n      url: string | URL,\n      ...rest: any[]\n    ) {\n      if (isTypingIndicatorUrl(url)) {\n        console.log(`[Uprooted:Silent typing] Blocked typing indicator`);\n        return originalXHROpen!.call(this, method, \"about:blank\", ...rest);\n      }\n      return originalXHROpen!.call(this, method, url, ...rest);\n    };\n\n    console.log(\"[Uprooted:Silent typing] Network intercepts installed\");\n  },\n\n  stop() {\n    if (originalFetch) {\n      window.fetch = originalFetch;\n      originalFetch = null;\n    }\n    if (originalXHROpen) {\n      XMLHttpRequest.prototype.open = originalXHROpen;\n      originalXHROpen = null;\n    }\n    console.log(\"[Uprooted:Silent typing] Intercepts removed\");\n  },\n};\n\nexport default silentTypingPlugin;", "/**\n * Native Helpers -- Utilities for interacting with Root's native layer.\n *\n * Root's Chromium runs with --disable-web-security, so we have broad access\n * to the page context. These helpers wrap common native interactions.\n */\n\n/**\n * Get the current theme from Root's data attribute.\n */\nexport function getCurrentTheme(): string | null {\n  return document.documentElement.getAttribute(\"data-theme\");\n}\n\n/**\n * Override a CSS variable at the :root level.\n * This mimics what Root's server does via InjectCss.\n */\nexport function setCssVariable(name: string, value: string): void {\n  document.documentElement.style.setProperty(name, value);\n}\n\n/**\n * Remove a CSS variable override, falling back to the stylesheet default.\n */\nexport function removeCssVariable(name: string): void {\n  document.documentElement.style.removeProperty(name);\n}\n\n/**\n * Set multiple CSS variables at once.\n */\nexport function setCssVariables(vars: Record<string, string>): void {\n  for (const [name, value] of Object.entries(vars)) {\n    document.documentElement.style.setProperty(name, value);\n  }\n}\n\n/**\n * Log a message through Root's native bridge (appears in .NET logs).\n */\nexport function nativeLog(message: string): void {\n  window.__webRtcToNative?.log?.(`[Uprooted] ${message}`);\n}\n", "[\r\n  {\r\n    \"name\": \"default\",\r\n    \"display_name\": \"Default Dark\",\r\n    \"description\": \"Root's built-in dark theme\",\r\n    \"author\": \"Root Communications\",\r\n    \"variables\": {},\r\n    \"preview_colors\": {\r\n      \"background\": \"#0D1521\",\r\n      \"text\": \"#F2F2F2\",\r\n      \"accent\": \"#3B6AF8\",\r\n      \"border\": \"#242C36\"\r\n    }\r\n  },\r\n  {\r\n    \"name\": \"crimson\",\r\n    \"display_name\": \"Crimson\",\r\n    \"description\": \"Deep red accent theme\",\r\n    \"author\": \"watchthelight\",\r\n    \"variables\": {\r\n      \"--rootsdk-brand-primary\": \"#C42B1C\",\r\n      \"--rootsdk-brand-secondary\": \"#D94A3D\",\r\n      \"--rootsdk-brand-tertiary\": \"#A32417\",\r\n      \"--rootsdk-background-primary\": \"#241414\",\r\n      \"--rootsdk-background-secondary\": \"#2C1818\",\r\n      \"--rootsdk-background-tertiary\": \"#1A0E0E\",\r\n      \"--rootsdk-input\": \"#1E1010\",\r\n      \"--rootsdk-border\": \"#402828\",\r\n      \"--rootsdk-link\": \"#E06B60\",\r\n      \"--rootsdk-muted\": \"#6F5050\"\r\n    },\r\n    \"preview_colors\": {\r\n      \"background\": \"#241414\",\r\n      \"text\": \"#F0EAEA\",\r\n      \"accent\": \"#C42B1C\",\r\n      \"border\": \"#402828\"\r\n    }\r\n  },\r\n  {\r\n    \"name\": \"loki\",\r\n    \"display_name\": \"Loki\",\r\n    \"description\": \"Gold and green\",\r\n    \"author\": \"watchthelight\",\r\n    \"variables\": {\r\n      \"--rootsdk-brand-primary\": \"#2A5A40\",\r\n      \"--rootsdk-brand-secondary\": \"#3D7050\",\r\n      \"--rootsdk-brand-tertiary\": \"#1E402F\",\r\n      \"--rootsdk-background-primary\": \"#0F1210\",\r\n      \"--rootsdk-background-secondary\": \"#151A15\",\r\n      \"--rootsdk-background-tertiary\": \"#0A0D0A\",\r\n      \"--rootsdk-input\": \"#0C0F0C\",\r\n      \"--rootsdk-border\": \"#3D4A35\",\r\n      \"--rootsdk-link\": \"#508A62\",\r\n      \"--rootsdk-muted\": \"#4A5A42\"\r\n    },\r\n    \"preview_colors\": {\r\n      \"background\": \"#0F1210\",\r\n      \"text\": \"#F0ECE0\",\r\n      \"accent\": \"#2A5A40\",\r\n      \"border\": \"#3D4A35\"\r\n    }\r\n  },\r\n  {\r\n    \"name\": \"cosmic-smoothie\",\r\n    \"display_name\": \"Cosmic Smoothie\",\r\n    \"description\": \"Deep purple space\",\r\n    \"author\": \"watchthelight\",\r\n    \"variables\": {\r\n      \"--rootsdk-brand-primary\": \"#7328BA\",\r\n      \"--rootsdk-brand-secondary\": \"#8A3FD2\",\r\n      \"--rootsdk-brand-tertiary\": \"#5C1E98\",\r\n      \"--rootsdk-background-primary\": \"#0A041E\",\r\n      \"--rootsdk-background-secondary\": \"#100822\",\r\n      \"--rootsdk-background-tertiary\": \"#060216\",\r\n      \"--rootsdk-input\": \"#080318\",\r\n      \"--rootsdk-border\": \"#302040\",\r\n      \"--rootsdk-link\": \"#A15DE6\",\r\n      \"--rootsdk-muted\": \"#584870\"\r\n    },\r\n    \"preview_colors\": {\r\n      \"background\": \"#0A041E\",\r\n      \"text\": \"#F4ECF8\",\r\n      \"accent\": \"#7328BA\",\r\n      \"border\": \"#302040\"\r\n    }\r\n  },\r\n  {\r\n    \"name\": \"custom\",\r\n    \"display_name\": \"Custom\",\r\n    \"description\": \"User-defined accent and background colors\",\r\n    \"author\": \"You\",\r\n    \"variables\": {},\r\n    \"preview_colors\": {\r\n      \"background\": \"#0D1521\",\r\n      \"text\": \"#F2F2F2\",\r\n      \"accent\": \"#3B6AF8\",\r\n      \"border\": \"#242C36\"\r\n    }\r\n  }\r\n]\r\n", "/**\n * Built-in Theme Plugin -- Applies custom CSS themes to Root's UI.\n *\n * Root's entire color system is CSS variables (--rootsdk-* and --color-*).\n * This plugin overrides those variables to apply custom themes.\n *\n * Theme definitions are loaded from themes.json (shared with installer backend).\n * For the \"custom\" theme, CSS variables are generated at runtime from\n * user-chosen accent + background colors.\n */\n\nimport type { UprootedPlugin } from \"../../types/plugin.js\";\nimport { setCssVariables, removeCssVariable } from \"../../api/native.js\";\nimport themes from \"./themes.json\";\n\ninterface ThemeDef {\n  name: string;\n  display_name: string;\n  variables: Record<string, string>;\n}\n\n// Collect all variable names across all themes for cleanup\nconst allVarNames = new Set<string>();\nfor (const theme of themes as ThemeDef[]) {\n  for (const name of Object.keys(theme.variables)) {\n    allVarNames.add(name);\n  }\n}\n// Also include custom theme variable names so they get cleaned up\nconst customVarNames = [\n  \"--rootsdk-brand-primary\",\n  \"--rootsdk-brand-secondary\",\n  \"--rootsdk-brand-tertiary\",\n  \"--rootsdk-background-primary\",\n  \"--rootsdk-background-secondary\",\n  \"--rootsdk-background-tertiary\",\n  \"--rootsdk-input\",\n  \"--rootsdk-border\",\n  \"--rootsdk-link\",\n  \"--rootsdk-muted\",\n];\nfor (const name of customVarNames) {\n  allVarNames.add(name);\n}\n\n// ===== Color math helpers =====\n\nfunction parseHex(hex: string): [number, number, number] {\n  const h = hex.replace(/^#/, \"\");\n  return [parseInt(h.slice(0, 2), 16), parseInt(h.slice(2, 4), 16), parseInt(h.slice(4, 6), 16)];\n}\n\nfunction toHex(r: number, g: number, b: number): string {\n  const clamp = (v: number) => Math.max(0, Math.min(255, Math.round(v)));\n  return `#${clamp(r).toString(16).padStart(2, \"0\")}${clamp(g).toString(16).padStart(2, \"0\")}${clamp(b).toString(16).padStart(2, \"0\")}`;\n}\n\nexport function darken(hex: string, percent: number): string {\n  const [r, g, b] = parseHex(hex);\n  const factor = 1 - Math.min(100, Math.max(0, percent)) / 100;\n  return toHex(r * factor, g * factor, b * factor);\n}\n\nexport function lighten(hex: string, percent: number): string {\n  const [r, g, b] = parseHex(hex);\n  const factor = Math.min(100, Math.max(0, percent)) / 100;\n  return toHex(r + (255 - r) * factor, g + (255 - g) * factor, b + (255 - b) * factor);\n}\n\nfunction luminance(hex: string): number {\n  const [r, g, b] = parseHex(hex);\n  const lin = (c: number) => {\n    const s = c / 255;\n    return s <= 0.03928 ? s / 12.92 : ((s + 0.055) / 1.055) ** 2.4;\n  };\n  return 0.2126 * lin(r) + 0.7152 * lin(g) + 0.0722 * lin(b);\n}\n\n/**\n * Generate CSS variables for a custom theme from accent + background colors.\n */\nexport function generateCustomVariables(accent: string, bg: string): Record<string, string> {\n  const isDark = luminance(bg) < 0.3;\n  const mutedColor = isDark ? lighten(bg, 25) : darken(bg, 25);\n  const linkColor = lighten(accent, 30);\n\n  return {\n    \"--rootsdk-brand-primary\": accent,\n    \"--rootsdk-brand-secondary\": lighten(accent, 15),\n    \"--rootsdk-brand-tertiary\": darken(accent, 15),\n    \"--rootsdk-background-primary\": bg,\n    \"--rootsdk-background-secondary\": lighten(bg, 8),\n    \"--rootsdk-background-tertiary\": darken(bg, 8),\n    \"--rootsdk-input\": darken(bg, 5),\n    \"--rootsdk-border\": lighten(bg, 18),\n    \"--rootsdk-link\": linkColor,\n    \"--rootsdk-muted\": mutedColor,\n  };\n}\n\nexport default {\n  name: \"themes\",\n  description: \"Built-in theme engine for Root Communications\",\n  version: \"0.3.6-rc\",\n  authors: [{ name: \"Uprooted\" }],\n\n  settings: {\n    theme: {\n      type: \"select\",\n      default: \"default\",\n      description: \"Which theme to apply\",\n      options: (themes as ThemeDef[]).map((t) => t.name),\n    },\n  },\n\n  start() {\n    // Flush ALL known variables first so nothing sticks from a previous theme\n    for (const name of allVarNames) {\n      removeCssVariable(name);\n    }\n\n    const settings = window.__UPROOTED_SETTINGS__?.plugins?.themes?.config;\n    const themeName = (settings?.theme as string) ?? \"default\";\n\n    if (themeName === \"custom\") {\n      // Read custom colors from settings\n      const customAccent = (settings?.customAccent as string) ?? \"#3B6AF8\";\n      const customBg = (settings?.customBackground as string) ?? \"#0D1521\";\n      const vars = generateCustomVariables(customAccent, customBg);\n      setCssVariables(vars);\n      return;\n    }\n\n    const theme = (themes as ThemeDef[]).find((t) => t.name === themeName);\n    if (theme && Object.keys(theme.variables).length > 0) {\n      setCssVariables(theme.variables);\n    }\n  },\n\n  stop() {\n    for (const name of allVarNames) {\n      removeCssVariable(name);\n    }\n  },\n} satisfies UprootedPlugin;\n", "/**\n * Reusable UI components for the settings panel.\n */\n\nimport type { PluginLoader } from \"../../core/pluginLoader.js\";\nimport { setCssVariables, removeCssVariable } from \"../../api/native.js\";\nimport { injectCss, removeCss } from \"../../api/css.js\";\nimport themes from \"../themes/themes.json\";\nimport { generateCustomVariables } from \"../themes/index.js\";\n\ninterface ThemeDef {\n  name: string;\n  display_name: string;\n  variables: Record<string, string>;\n}\n\n// --- Primitive Components ---\n\n/** Create a toggle switch */\nexport function createToggle(\n  checked: boolean,\n  onChange: (value: boolean) => void,\n): HTMLElement {\n  const wrapper = document.createElement(\"label\");\n  wrapper.className = \"uprooted-toggle\";\n\n  const input = document.createElement(\"input\");\n  input.type = \"checkbox\";\n  input.checked = checked;\n  input.addEventListener(\"change\", () => onChange(input.checked));\n\n  const track = document.createElement(\"span\");\n  track.className = \"uprooted-toggle-track\";\n\n  wrapper.appendChild(input);\n  wrapper.appendChild(track);\n  return wrapper;\n}\n\n/** Create a select dropdown */\nexport function createSelect(\n  options: string[],\n  selected: string,\n  onChange: (value: string) => void,\n): HTMLSelectElement {\n  const select = document.createElement(\"select\");\n  select.className = \"uprooted-select\";\n\n  for (const opt of options) {\n    const option = document.createElement(\"option\");\n    option.value = opt;\n    option.textContent = opt;\n    option.selected = opt === selected;\n    select.appendChild(option);\n  }\n\n  select.addEventListener(\"change\", () => onChange(select.value));\n  return select;\n}\n\n/** Create a textarea for custom CSS */\nexport function createTextarea(\n  value: string,\n  placeholder: string,\n  onChange: (value: string) => void,\n): HTMLTextAreaElement {\n  const textarea = document.createElement(\"textarea\");\n  textarea.className = \"uprooted-textarea\";\n  textarea.value = value;\n  textarea.placeholder = placeholder;\n  textarea.spellcheck = false;\n\n  let debounceTimer: ReturnType<typeof setTimeout>;\n  textarea.addEventListener(\"input\", () => {\n    clearTimeout(debounceTimer);\n    debounceTimer = setTimeout(() => onChange(textarea.value), 300);\n  });\n\n  return textarea;\n}\n\n/** Create a settings row with label + control */\nexport function createRow(\n  label: string,\n  description: string,\n  control: HTMLElement,\n): HTMLElement {\n  const row = document.createElement(\"div\");\n  row.className = \"uprooted-settings-row\";\n\n  const labelDiv = document.createElement(\"div\");\n  labelDiv.className = \"uprooted-settings-row-info\";\n  const labelText = document.createElement(\"div\");\n  labelText.className = \"uprooted-settings-row-label\";\n  labelText.textContent = label;\n  labelDiv.appendChild(labelText);\n\n  if (description) {\n    const desc = document.createElement(\"div\");\n    desc.className = \"uprooted-settings-row-desc\";\n    desc.textContent = description;\n    labelDiv.appendChild(desc);\n  }\n\n  row.appendChild(labelDiv);\n  row.appendChild(control);\n  return row;\n}\n\n/** Create a section header */\nexport function createSection(label: string): HTMLElement {\n  const section = document.createElement(\"div\");\n  section.className = \"uprooted-settings-section\";\n\n  const header = document.createElement(\"div\");\n  header.className = \"uprooted-settings-section-label\";\n  header.textContent = label;\n  section.appendChild(header);\n\n  return section;\n}\n\n// --- Content Page Builders ---\n\n/** Build the main Uprooted info/about page. */\nexport function buildUprootedPage(): HTMLElement {\n  const page = document.createElement(\"div\");\n  page.className = \"uprooted-page-wrapper\";\n\n  // Header\n  const header = document.createElement(\"div\");\n  header.className = \"uprooted-page-header\";\n\n  const title = document.createElement(\"h2\");\n  title.className = \"uprooted-page-title\";\n  title.textContent = \"Uprooted\";\n\n  const badge = document.createElement(\"span\");\n  badge.className = \"uprooted-page-badge\";\n  badge.textContent = `v${window.__UPROOTED_VERSION__ ?? \"dev\"}`;\n\n  header.appendChild(title);\n  header.appendChild(badge);\n  page.appendChild(header);\n\n  // About section\n  const aboutSection = createSection(\"About\");\n  const aboutText = document.createElement(\"div\");\n  aboutText.className = \"uprooted-page-text\";\n  aboutText.textContent =\n    \"Uprooted is a client modification framework for Root Communications. \" +\n    \"It allows plugins and themes to customize your Root experience at runtime.\";\n  aboutSection.appendChild(aboutText);\n  page.appendChild(aboutSection);\n\n  // Links section\n  const linksSection = createSection(\"Links\");\n\n  const githubRow = createLinkRow(\"GitHub\", \"Source code & issues\", \"https://github.com/watchthelight/uprooted\");\n  linksSection.appendChild(githubRow);\n\n  const websiteRow = createLinkRow(\"Website\", \"uprooted.sh\", \"https://uprooted.sh\");\n  linksSection.appendChild(websiteRow);\n\n  page.appendChild(linksSection);\n\n  // Info section\n  const infoSection = createSection(\"Session Info\");\n\n  const infoText = document.createElement(\"div\");\n  infoText.className = \"uprooted-page-notice\";\n  infoText.textContent =\n    \"Changes made through Uprooted are session-only. \" +\n    \"They will reset when Root restarts. Use the installer to make permanent changes.\";\n  infoSection.appendChild(infoText);\n\n  page.appendChild(infoSection);\n\n  return page;\n}\n\n/** Build the plugins management page. */\nexport function buildPluginsPage(loader: PluginLoader): HTMLElement {\n  const page = document.createElement(\"div\");\n  page.className = \"uprooted-page-wrapper\";\n\n  // Header\n  const header = document.createElement(\"div\");\n  header.className = \"uprooted-page-header\";\n  const title = document.createElement(\"h2\");\n  title.className = \"uprooted-page-title\";\n  title.textContent = \"Plugins\";\n  header.appendChild(title);\n  page.appendChild(header);\n\n  // Plugin list\n  const settings = window.__UPROOTED_SETTINGS__;\n  const pluginNames = getRegisteredPlugins(loader);\n\n  if (pluginNames.length === 0) {\n    const empty = document.createElement(\"div\");\n    empty.className = \"uprooted-page-text\";\n    empty.textContent = \"No plugins registered.\";\n    page.appendChild(empty);\n    return page;\n  }\n\n  const listSection = createSection(\"Installed Plugins\");\n\n  for (const name of pluginNames) {\n    if (name === \"settings-panel\") continue;\n\n    const plugin = getPlugin(loader, name);\n    const isEnabled = settings?.plugins?.[name]?.enabled ?? true;\n    const isActive = getActivePlugins(loader).has(name);\n\n    const toggle = createToggle(isEnabled, async (enabled) => {\n      if (enabled) {\n        await loader.start(name);\n      } else {\n        await loader.stop(name);\n      }\n      // Update status badge after toggle\n      const badge = row.querySelector(\".uprooted-plugin-status\");\n      if (badge) {\n        badge.textContent = enabled ? \"Active\" : \"Inactive\";\n        badge.className = \"uprooted-plugin-status \" + (enabled ? \"uprooted-plugin-status--active\" : \"\");\n      }\n    });\n\n    const description = plugin?.description ?? \"\";\n    const version = plugin?.version ? ` v${plugin.version}` : \"\";\n\n    const row = createRow(name + version, description, toggle);\n    row.classList.add(\"uprooted-plugin-row\");\n\n    // Status badge\n    const badge = document.createElement(\"span\");\n    badge.className = \"uprooted-plugin-status \" + (isActive ? \"uprooted-plugin-status--active\" : \"\");\n    badge.textContent = isActive ? \"Active\" : \"Inactive\";\n    const rowInfo = row.querySelector(\".uprooted-settings-row-info\");\n    if (rowInfo) {\n      const labelEl = rowInfo.querySelector(\".uprooted-settings-row-label\");\n      if (labelEl) labelEl.appendChild(badge);\n    }\n\n    listSection.appendChild(row);\n\n    // Privacy notice for sentry-blocker\n    if (name === \"sentry-blocker\") {\n      const notice = document.createElement(\"div\");\n      notice.className = \"uprooted-page-notice\";\n      notice.innerHTML =\n        \"<strong>Without this plugin, Root sends the following to Sentry's servers (not Root's servers):</strong><br>\" +\n        \"\\u2022 Your IP address (on every error event)<br>\" +\n        \"\\u2022 Session replays: DOM snapshots, mouse movements, input values<br>\" +\n        \"\\u2022 Authentication headers including your Bearer token<br>\" +\n        \"\\u2022 Application traces and logs\";\n      listSection.appendChild(notice);\n    }\n  }\n\n  page.appendChild(listSection);\n  return page;\n}\n\n/** Flush all known theme CSS variables */\nfunction flushAllThemeVars(): void {\n  for (const t of themes as ThemeDef[]) {\n    for (const varName of Object.keys(t.variables)) {\n      removeCssVariable(varName);\n    }\n  }\n  // Also flush custom variable names\n  for (const varName of [\n    \"--rootsdk-brand-primary\",\n    \"--rootsdk-brand-secondary\",\n    \"--rootsdk-brand-tertiary\",\n    \"--rootsdk-background-primary\",\n    \"--rootsdk-background-secondary\",\n    \"--rootsdk-background-tertiary\",\n    \"--rootsdk-input\",\n    \"--rootsdk-border\",\n    \"--rootsdk-link\",\n    \"--rootsdk-muted\",\n  ]) {\n    removeCssVariable(varName);\n  }\n}\n\n/** Validate a #RRGGBB hex string */\nfunction isValidHex(hex: string): boolean {\n  return /^#[0-9A-Fa-f]{6}$/.test(hex);\n}\n\n/** Build the themes management page. */\nexport function buildThemesPage(loader: PluginLoader): HTMLElement {\n  const page = document.createElement(\"div\");\n  page.className = \"uprooted-page-wrapper\";\n\n  // Header\n  const header = document.createElement(\"div\");\n  header.className = \"uprooted-page-header\";\n  const title = document.createElement(\"h2\");\n  title.className = \"uprooted-page-title\";\n  title.textContent = \"Themes\";\n  header.appendChild(title);\n  page.appendChild(header);\n\n  // Theme selector dropdown\n  const themeSection = createSection(\"Active Theme\");\n  const settings = window.__UPROOTED_SETTINGS__;\n  const currentTheme = (settings?.plugins?.themes?.config?.theme as string) ?? \"default\";\n  const themeNames = (themes as ThemeDef[]).map((t) => t.display_name);\n\n  const themeSelect = createSelect(\n    themeNames,\n    (themes as ThemeDef[]).find((t) => t.name === currentTheme)?.display_name ?? \"Default Dark\",\n    (displayName) => {\n      const theme = (themes as ThemeDef[]).find((t) => t.display_name === displayName);\n      if (!theme) return;\n\n      flushAllThemeVars();\n\n      if (theme.name === \"custom\") {\n        // Show custom section, apply current custom colors\n        customSection.style.display = \"\";\n        const accent = accentInput.value || \"#3B6AF8\";\n        const bg = bgInput.value || \"#0D1521\";\n        if (isValidHex(accent) && isValidHex(bg)) {\n          setCssVariables(generateCustomVariables(accent, bg));\n        }\n      } else {\n        customSection.style.display = \"none\";\n        if (Object.keys(theme.variables).length > 0) {\n          setCssVariables(theme.variables);\n        }\n      }\n    },\n  );\n\n  const themeRow = createRow(\"Theme\", \"Live preview, session-only\", themeSelect);\n  themeSection.appendChild(themeRow);\n  page.appendChild(themeSection);\n\n  // Theme preview cards\n  const previewSection = createSection(\"Available Themes\");\n  const themeCards: { card: HTMLElement; theme: ThemeDef }[] = [];\n\n  /** Highlight only the active card */\n  function updateActiveCard(activeThemeName: string): void {\n    for (const entry of themeCards) {\n      entry.card.classList.toggle(\n        \"uprooted-theme-card--active\",\n        entry.theme.name === activeThemeName,\n      );\n    }\n  }\n\n  for (const theme of themes as ThemeDef[]) {\n    if (theme.name === \"custom\") continue; // Custom has its own section\n\n    const card = document.createElement(\"div\");\n    card.className = \"uprooted-theme-card\";\n\n    const cardName = document.createElement(\"div\");\n    cardName.className = \"uprooted-theme-card-name\";\n    cardName.textContent = theme.display_name;\n\n    const cardAuthor = document.createElement(\"div\");\n    cardAuthor.className = \"uprooted-theme-card-author\";\n    cardAuthor.textContent = (theme as any).author ?? \"Unknown\";\n\n    const colorBar = document.createElement(\"div\");\n    colorBar.className = \"uprooted-theme-card-colors\";\n    const previewColors = (theme as any).preview_colors as Record<string, string> | undefined;\n    if (previewColors) {\n      for (const color of Object.values(previewColors)) {\n        const swatch = document.createElement(\"span\");\n        swatch.className = \"uprooted-theme-swatch\";\n        swatch.style.backgroundColor = color;\n        colorBar.appendChild(swatch);\n      }\n    }\n\n    // Click-to-select: apply theme and sync dropdown\n    card.addEventListener(\"click\", () => {\n      themeSelect.value = theme.display_name;\n      themeSelect.dispatchEvent(new Event(\"change\"));\n      updateActiveCard(theme.name);\n    });\n\n    card.appendChild(cardName);\n    card.appendChild(cardAuthor);\n    card.appendChild(colorBar);\n    previewSection.appendChild(card);\n    themeCards.push({ card, theme });\n  }\n\n  // Set initial active state\n  updateActiveCard(currentTheme);\n  page.appendChild(previewSection);\n\n  // Custom theme section\n  const customSection = document.createElement(\"div\");\n  customSection.className = \"uprooted-settings-section\";\n  customSection.style.display = currentTheme === \"custom\" ? \"\" : \"none\";\n\n  const customHeader = document.createElement(\"div\");\n  customHeader.className = \"uprooted-settings-section-label\";\n  customHeader.textContent = \"Custom Theme Colors\";\n  customSection.appendChild(customHeader);\n\n  const customDesc = document.createElement(\"div\");\n  customDesc.className = \"uprooted-page-text\";\n  customDesc.textContent = \"Pick accent and background colors. All shades are auto-derived.\";\n  customSection.appendChild(customDesc);\n\n  // Accent color picker\n  const accentInput = document.createElement(\"input\");\n  accentInput.type = \"color\";\n  accentInput.value = (settings?.plugins?.themes?.config?.customAccent as string) ?? \"#3B6AF8\";\n  accentInput.className = \"uprooted-color-input\";\n  const accentRow = createRow(\"Accent\", \"Primary brand color\", accentInput);\n  customSection.appendChild(accentRow);\n\n  // Background color picker\n  const bgInput = document.createElement(\"input\");\n  bgInput.type = \"color\";\n  bgInput.value = (settings?.plugins?.themes?.config?.customBackground as string) ?? \"#0D1521\";\n  bgInput.className = \"uprooted-color-input\";\n  const bgRow = createRow(\"Background\", \"Main background color\", bgInput);\n  customSection.appendChild(bgRow);\n\n  // Live preview on input change\n  const applyCustomPreview = () => {\n    if (!isValidHex(accentInput.value) || !isValidHex(bgInput.value)) return;\n    flushAllThemeVars();\n    setCssVariables(generateCustomVariables(accentInput.value, bgInput.value));\n  };\n\n  accentInput.addEventListener(\"input\", applyCustomPreview);\n  bgInput.addEventListener(\"input\", applyCustomPreview);\n\n  page.appendChild(customSection);\n\n  // Custom CSS\n  const cssSection = createSection(\"Custom CSS\");\n  const cssDesc = document.createElement(\"div\");\n  cssDesc.className = \"uprooted-page-text\";\n  cssDesc.textContent = \"Inject custom CSS into Root. Use CSS variables like --rootsdk-brand-primary.\";\n  cssSection.appendChild(cssDesc);\n\n  const textarea = createTextarea(\n    settings?.customCss ?? \"\",\n    \":root { --rootsdk-brand-primary: #ff0000; }\",\n    (value) => {\n      if (value.trim()) {\n        injectCss(\"uprooted-custom\", value);\n      } else {\n        removeCss(\"uprooted-custom\");\n      }\n    },\n  );\n  cssSection.appendChild(textarea);\n  page.appendChild(cssSection);\n\n  return page;\n}\n\n// --- Helpers ---\n\nfunction createLinkRow(label: string, description: string, url: string): HTMLElement {\n  const row = document.createElement(\"div\");\n  row.className = \"uprooted-settings-row uprooted-link-row\";\n\n  const info = document.createElement(\"div\");\n  info.className = \"uprooted-settings-row-info\";\n\n  const labelText = document.createElement(\"div\");\n  labelText.className = \"uprooted-settings-row-label\";\n  labelText.textContent = label;\n\n  const desc = document.createElement(\"div\");\n  desc.className = \"uprooted-settings-row-desc\";\n  desc.textContent = description;\n\n  info.appendChild(labelText);\n  info.appendChild(desc);\n\n  const link = document.createElement(\"a\");\n  link.className = \"uprooted-link\";\n  link.href = url;\n  link.target = \"_blank\";\n  link.rel = \"noopener\";\n  link.textContent = \"Open\";\n  link.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    window.open(url, \"_blank\");\n  });\n\n  row.appendChild(info);\n  row.appendChild(link);\n  return row;\n}\n\nfunction getRegisteredPlugins(loader: PluginLoader): string[] {\n  const plugins = (loader as any).plugins as Map<string, unknown>;\n  return Array.from(plugins.keys());\n}\n\nfunction getPlugin(loader: PluginLoader, name: string): { description?: string; version?: string } | null {\n  const plugins = (loader as any).plugins as Map<string, any>;\n  return plugins.get(name) ?? null;\n}\n\nfunction getActivePlugins(loader: PluginLoader): Set<string> {\n  return (loader as any).activePlugins as Set<string>;\n}\n", "/**\n * Settings panel -- Vencord-style sidebar injection into Root's settings page.\n *\n * Uses a MutationObserver to detect when Root's settings page opens, then:\n *   1. Discovers sidebar structure by text content matching\n *   2. Clones existing sidebar elements to match styling\n *   3. Injects an \"UPROOTED\" section with nav items\n *   4. Swaps the content panel when Uprooted items are clicked\n *   5. Appends version info near Root's version text\n */\n\nimport { buildUprootedPage, buildPluginsPage, buildThemesPage } from \"./components.js\";\nimport type { PluginLoader } from \"../../core/pluginLoader.js\";\n\n// --- State ---\nlet observer: MutationObserver | null = null;\nlet injected = false;\nlet rootContentPanel: HTMLElement | null = null;\nlet uprootedContent: HTMLElement | null = null;\nlet activeUprootedItem: HTMLElement | null = null;\nlet loader: PluginLoader | null = null;\nlet debounceTimer: ReturnType<typeof setTimeout> | undefined;\n\n// --- Debug ---\nconst DEBUG = true;\nlet debugEl: HTMLElement | null = null;\n\nfunction debugLog(msg: string): void {\n  console.log(`[Uprooted] ${msg}`);\n  if (!DEBUG) return;\n  if (!debugEl) {\n    debugEl = document.createElement(\"div\");\n    debugEl.id = \"uprooted-debug\";\n    debugEl.style.cssText =\n      \"position:fixed;bottom:0;left:0;right:0;z-index:999999;padding:6px 12px;\" +\n      \"background:#1a1a2e;color:#0f0;font:11px/1.4 monospace;max-height:30vh;\" +\n      \"overflow:auto;border-top:2px solid #0f0;pointer-events:none;\";\n    (document.body ?? document.documentElement).appendChild(debugEl);\n  }\n  const line = document.createElement(\"div\");\n  line.textContent = `${new Date().toLocaleTimeString()} ${msg}`;\n  debugEl.appendChild(line);\n  // Keep only last 20 lines\n  while (debugEl.children.length > 20) debugEl.firstChild?.remove();\n}\n\n// --- Public API ---\n\nexport function startObserving(pluginLoader: PluginLoader): void {\n  loader = pluginLoader;\n\n  debugLog(`startObserving called. location=${window.location.href} title=${document.title}`);\n  debugLog(`body children=${document.body?.children.length} total elements=${document.querySelectorAll(\"*\").length}`);\n\n  observer = new MutationObserver(() => {\n    clearTimeout(debounceTimer);\n    debounceTimer = setTimeout(tryInject, 80);\n  });\n  observer.observe(document.body, { childList: true, subtree: true });\n  // Try immediately in case settings is already open\n  tryInject();\n}\n\nexport function stopObserving(): void {\n  if (observer) {\n    observer.disconnect();\n    observer = null;\n  }\n  clearTimeout(debounceTimer);\n  cleanup();\n  loader = null;\n}\n\n// --- DOM Discovery ---\n\n/** Find a leaf element whose trimmed textContent exactly matches `text`. */\nfunction findByExactText(text: string, root: Element = document.body): HTMLElement | null {\n  const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\n    acceptNode(node) {\n      const el = node as HTMLElement;\n      if (el.children.length === 0 && el.textContent?.trim() === text) {\n        return NodeFilter.FILTER_ACCEPT;\n      }\n      return NodeFilter.FILTER_SKIP;\n    },\n  });\n  return walker.nextNode() as HTMLElement | null;\n}\n\n/** Find a leaf element whose textContent includes `text`. */\nfunction findByTextIncludes(text: string, root: Element = document.body): HTMLElement | null {\n  const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\n    acceptNode(node) {\n      const el = node as HTMLElement;\n      if (el.children.length === 0 && el.textContent?.includes(text)) {\n        return NodeFilter.FILTER_ACCEPT;\n      }\n      return NodeFilter.FILTER_SKIP;\n    },\n  });\n  return walker.nextNode() as HTMLElement | null;\n}\n\n// --- Core Logic ---\n\nfunction tryInject(): void {\n  // If our elements are still in the DOM, nothing to do\n  if (injected && document.querySelector(\"[data-uprooted]\")) return;\n\n  // Reset if previously injected but elements were removed (settings closed/re-rendered)\n  if (injected) {\n    injected = false;\n    rootContentPanel = null;\n    uprootedContent = null;\n    activeUprootedItem = null;\n  }\n\n  // Step 1: Find \"APP SETTINGS\" header to confirm we're on the settings page\n  const appSettingsEl = findByExactText(\"APP SETTINGS\");\n  if (!appSettingsEl) return; // Not on settings page - silent return (this fires constantly)\n\n  debugLog(`Found \"APP SETTINGS\": tag=${appSettingsEl.tagName} class=${appSettingsEl.className}`);\n\n  // Step 2: Find \"Advanced\" text - the last item in the APP SETTINGS group\n  const advancedEl = findByExactText(\"Advanced\");\n  if (!advancedEl) {\n    debugLog(\"FAIL: Could not find 'Advanced' text\");\n    return;\n  }\n  debugLog(`Found \"Advanced\": tag=${advancedEl.tagName} class=${advancedEl.className}`);\n\n  // Step 3: Find the settings layout by walking up from APP SETTINGS to find\n  // a flex-row ancestor that has both sidebar and content as children\n  const layout = findSettingsLayout(appSettingsEl);\n  if (!layout) {\n    debugLog(\"FAIL: Could not find settings flex layout\");\n    // Fallback debug: dump ancestors\n    dumpAncestors(appSettingsEl);\n    return;\n  }\n  const { sidebar, content } = layout;\n  debugLog(`Found layout: sidebar=${sidebar.tagName}.${sidebar.className} content=${content.tagName}.${content.className}`);\n\n  // Step 4: Find the nav item to clone as a template.\n  // Walk up from \"Advanced\" leaf text to its item-level element.\n  const templateItem = findItemElement(advancedEl, sidebar);\n  if (!templateItem) {\n    debugLog(\"FAIL: Could not find template item from 'Advanced'\");\n    return;\n  }\n  debugLog(`Template item: tag=${templateItem.tagName} class=${templateItem.className} html=${templateItem.outerHTML.slice(0, 120)}`);\n\n  // Step 5: Find where to insert - after the last APP SETTINGS item (Advanced)\n  const insertAfterEl = templateItem;\n\n  // Step 6: Inject our sidebar section\n  injectSidebarSection(sidebar, appSettingsEl, templateItem, insertAfterEl, content);\n\n  // Step 7: Inject version text\n  injectVersionText();\n\n  injected = true;\n  debugLog(\"SUCCESS: Settings sidebar injected\");\n}\n\n/**\n * Find the settings page flex layout by walking up from a known sidebar element.\n * Returns the sidebar and content panel elements.\n */\nfunction findSettingsLayout(sidebarChild: HTMLElement): { sidebar: HTMLElement; content: HTMLElement } | null {\n  let el: HTMLElement | null = sidebarChild;\n\n  // Walk up to find a flex-row ancestor with 2+ children\n  for (let depth = 0; depth < 20; depth++) {\n    el = el?.parentElement ?? null;\n    if (!el || el === document.body || el === document.documentElement) break;\n\n    const style = getComputedStyle(el);\n    const isFlexRow =\n      style.display === \"flex\" && (style.flexDirection === \"row\" || style.flexDirection === \"\");\n    const isGrid = style.display === \"grid\";\n\n    if ((isFlexRow || isGrid) && el.children.length >= 2) {\n      // Candidate: check if one child contains \"APP SETTINGS\" and the other is wider\n      const children = Array.from(el.children).filter(c => c instanceof HTMLElement) as HTMLElement[];\n\n      // Find which child contains our sidebar text\n      let sidebarEl: HTMLElement | null = null;\n      let contentEl: HTMLElement | null = null;\n\n      for (const child of children) {\n        if (child.contains(sidebarChild)) {\n          sidebarEl = child;\n        } else if (!contentEl) {\n          // The first non-sidebar child that is substantial (not a divider/spacer)\n          if (child.clientWidth > 50 && child.clientHeight > 50) {\n            contentEl = child;\n          }\n        }\n      }\n\n      if (sidebarEl && contentEl) {\n        return { sidebar: sidebarEl, content: contentEl };\n      }\n    }\n  }\n\n  // Fallback: try to find content panel by looking for a sibling of any ancestor\n  // that is wider than the sidebar path\n  el = sidebarChild;\n  for (let depth = 0; depth < 15; depth++) {\n    el = el?.parentElement ?? null;\n    if (!el || el === document.body) break;\n\n    const parent = el.parentElement;\n    if (!parent) continue;\n\n    for (const sibling of Array.from(parent.children)) {\n      if (sibling !== el && sibling instanceof HTMLElement) {\n        if (sibling.clientWidth > el.clientWidth && sibling.clientHeight > 100) {\n          return { sidebar: el, content: sibling };\n        }\n      }\n    }\n  }\n\n  return null;\n}\n\n/**\n * From a text leaf element, walk up to find the item-level element\n * (the clickable nav item in the sidebar). Stops before reaching the sidebar container.\n */\nfunction findItemElement(textLeaf: HTMLElement, sidebar: HTMLElement): HTMLElement | null {\n  let el: HTMLElement | null = textLeaf;\n  let lastBeforeSidebar: HTMLElement | null = textLeaf;\n\n  while (el && el !== sidebar) {\n    // Check if this element's parent is the sidebar (or the sidebar's scroll container)\n    if (el.parentElement === sidebar) {\n      return el;\n    }\n\n    // Check if this is an item-level element:\n    // - Its parent has multiple children (sibling items)\n    // - The siblings include other nav items\n    const parent = el.parentElement;\n    if (parent && parent !== sidebar && parent.children.length >= 3) {\n      // This parent has multiple children - el is likely an item\n      // Verify by checking that siblings have text content (other nav items)\n      let siblingTextCount = 0;\n      for (const sib of Array.from(parent.children)) {\n        if (sib !== el && sib.textContent?.trim()) siblingTextCount++;\n      }\n      if (siblingTextCount >= 2) return el;\n    }\n\n    lastBeforeSidebar = el;\n    el = el.parentElement;\n  }\n\n  // If we reached the sidebar, return the last element before it\n  return lastBeforeSidebar !== textLeaf ? lastBeforeSidebar : textLeaf.parentElement;\n}\n\n/** Debug helper: dump ancestor chain of an element */\nfunction dumpAncestors(el: HTMLElement): void {\n  let current: HTMLElement | null = el;\n  let depth = 0;\n  while (current && current !== document.body && depth < 10) {\n    const style = getComputedStyle(current);\n    debugLog(\n      `  ancestor[${depth}]: ${current.tagName}.${current.className.toString().slice(0, 40)} ` +\n      `display=${style.display} flex-dir=${style.flexDirection} overflow-y=${style.overflowY} ` +\n      `children=${current.children.length} size=${current.clientWidth}x${current.clientHeight}`\n    );\n    current = current.parentElement;\n    depth++;\n  }\n}\n\n// --- Sidebar Injection ---\n\nfunction injectSidebarSection(\n  sidebar: HTMLElement,\n  appSettingsHeaderEl: HTMLElement,\n  templateItem: HTMLElement,\n  insertAfterEl: HTMLElement,\n  contentPanel: HTMLElement,\n): void {\n  // Create our section container\n  const section = document.createElement(\"div\");\n  section.setAttribute(\"data-uprooted\", \"section\");\n\n  // Clone the section header style from \"APP SETTINGS\" text element\n  const header = appSettingsHeaderEl.cloneNode(true) as HTMLElement;\n  header.textContent = \"UPROOTED\";\n  header.setAttribute(\"data-uprooted\", \"header\");\n  section.appendChild(header);\n\n  // Create nav items by cloning the template\n  const items = [\n    { name: \"Uprooted\", page: \"uprooted\" },\n    { name: \"Plugins\", page: \"plugins\" },\n    { name: \"Themes\", page: \"themes\" },\n  ];\n\n  for (const { name, page } of items) {\n    const item = templateItem.cloneNode(true) as HTMLElement;\n    item.setAttribute(\"data-uprooted\", \"item\");\n    item.setAttribute(\"data-uprooted-page\", page);\n\n    // Replace all text content in the cloned item\n    replaceTextContent(item, name);\n\n    // Remove any \"active\" classes from the clone\n    removeActiveState(item);\n\n    // Remove any React/framework internal props that could cause issues\n    cleanClonedElement(item);\n\n    // Attach click handler\n    item.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      onUprootedItemClick(item, page, sidebar, contentPanel);\n    });\n\n    section.appendChild(item);\n  }\n\n  // Insert after the last APP SETTINGS item (insertAfterEl).\n  // If insertAfterEl is a direct child of its parent, insert as sibling.\n  const insertParent = insertAfterEl.parentElement;\n  if (insertParent) {\n    if (insertAfterEl.nextSibling) {\n      insertParent.insertBefore(section, insertAfterEl.nextSibling);\n    } else {\n      insertParent.appendChild(section);\n    }\n  }\n\n  // Listen for clicks on Root's own sidebar items to restore their content\n  sidebar.addEventListener(\"click\", onSidebarClick, true);\n}\n\n/** Replace all text nodes in an element tree with the given text (only the first text node). */\nfunction replaceTextContent(el: HTMLElement, text: string): void {\n  const walker = document.createTreeWalker(el, NodeFilter.SHOW_TEXT);\n  let replaced = false;\n  while (walker.nextNode()) {\n    const node = walker.currentNode as Text;\n    if (node.textContent?.trim()) {\n      if (!replaced) {\n        node.textContent = text;\n        replaced = true;\n      } else {\n        // Remove extra text nodes (e.g. badges, counts)\n        node.textContent = \"\";\n      }\n    }\n  }\n}\n\n/** Remove active/selected CSS classes from a cloned element tree. */\nfunction removeActiveState(el: HTMLElement): void {\n  const allEls = [el, ...Array.from(el.querySelectorAll(\"*\"))] as HTMLElement[];\n  for (const e of allEls) {\n    const classes = Array.from(e.classList);\n    for (const cls of classes) {\n      if (/active|selected|current/i.test(cls)) {\n        e.classList.remove(cls);\n      }\n    }\n  }\n}\n\n/** Remove React/framework internal attributes from cloned elements. */\nfunction cleanClonedElement(el: HTMLElement): void {\n  const allEls = [el, ...Array.from(el.querySelectorAll(\"*\"))] as HTMLElement[];\n  for (const e of allEls) {\n    // Remove React fiber keys\n    for (const attr of Array.from(e.attributes)) {\n      if (attr.name.startsWith(\"__react\") || attr.name.startsWith(\"data-reactid\")) {\n        e.removeAttribute(attr.name);\n      }\n    }\n    // Remove id to avoid duplicates\n    if (e.id) e.removeAttribute(\"id\");\n    // Remove href to prevent navigation\n    if (e.tagName === \"A\") e.removeAttribute(\"href\");\n  }\n}\n\n// --- Content Panel Swapping ---\n\nfunction onUprootedItemClick(\n  clickedItem: HTMLElement,\n  pageName: string,\n  sidebar: HTMLElement,\n  contentPanel: HTMLElement,\n): void {\n  // Deactivate all Root sidebar items\n  deactivateRootItems(sidebar);\n\n  // Deactivate other Uprooted items and activate clicked one\n  const uprootedItems = sidebar.querySelectorAll(\"[data-uprooted-page]\");\n  for (const item of uprootedItems) {\n    removeActiveState(item as HTMLElement);\n    (item as HTMLElement).classList.remove(\"uprooted-sidebar-active\");\n  }\n  clickedItem.classList.add(\"uprooted-sidebar-active\");\n  activeUprootedItem = clickedItem;\n\n  // Hide Root's content panel\n  if (!rootContentPanel) {\n    rootContentPanel = contentPanel;\n  }\n  rootContentPanel.style.display = \"none\";\n\n  // Remove existing Uprooted content\n  uprootedContent?.remove();\n\n  // Build and insert new content\n  const page = buildPage(pageName);\n  if (page) {\n    page.setAttribute(\"data-uprooted\", \"content\");\n    page.classList.add(\"uprooted-page\");\n    rootContentPanel.parentElement?.appendChild(page);\n    uprootedContent = page;\n  }\n}\n\nfunction buildPage(name: string): HTMLElement | null {\n  switch (name) {\n    case \"uprooted\":\n      return buildUprootedPage();\n    case \"plugins\":\n      return loader ? buildPluginsPage(loader) : buildUprootedPage();\n    case \"themes\":\n      return loader ? buildThemesPage(loader) : buildUprootedPage();\n    default:\n      return null;\n  }\n}\n\n/** Deactivate Root's active sidebar item. */\nfunction deactivateRootItems(sidebar: HTMLElement): void {\n  const allItems = sidebar.querySelectorAll(\n    \":not([data-uprooted]) > :not([data-uprooted])\",\n  );\n  for (const el of allItems) {\n    const classes = Array.from(el.classList);\n    for (const cls of classes) {\n      if (/active|selected|current/i.test(cls)) {\n        el.classList.remove(cls);\n        (el as HTMLElement).setAttribute(\"data-uprooted-was-active\", cls);\n      }\n    }\n  }\n}\n\n/** Handle clicks on Root's own sidebar items to restore their content. */\nfunction onSidebarClick(e: Event): void {\n  const target = e.target as HTMLElement;\n  if (target.closest(\"[data-uprooted]\")) return;\n  restoreRootPage();\n}\n\nfunction restoreRootPage(): void {\n  uprootedContent?.remove();\n  uprootedContent = null;\n\n  if (rootContentPanel) {\n    rootContentPanel.style.display = \"\";\n  }\n\n  const uprootedItems = document.querySelectorAll(\"[data-uprooted-page]\");\n  for (const item of uprootedItems) {\n    removeActiveState(item as HTMLElement);\n    (item as HTMLElement).classList.remove(\"uprooted-sidebar-active\");\n  }\n\n  activeUprootedItem = null;\n}\n\n// --- Version Text ---\n\nfunction injectVersionText(): void {\n  const versionEl = findByTextIncludes(\"Root Version:\");\n  if (!versionEl) {\n    debugLog(\"Version text not found\");\n    return;\n  }\n\n  if (versionEl.parentElement?.querySelector(\"[data-uprooted='version']\")) return;\n\n  const uprootedVersion = document.createElement(\"div\");\n  uprootedVersion.setAttribute(\"data-uprooted\", \"version\");\n  uprootedVersion.className = \"uprooted-version\";\n  uprootedVersion.textContent = `Uprooted Version: ${window.__UPROOTED_VERSION__ ?? \"dev\"}`;\n\n  const rootStyle = getComputedStyle(versionEl);\n  uprootedVersion.style.fontSize = rootStyle.fontSize;\n  uprootedVersion.style.color = rootStyle.color;\n  uprootedVersion.style.fontFamily = rootStyle.fontFamily;\n  uprootedVersion.style.marginTop = \"4px\";\n\n  if (versionEl.nextSibling) {\n    versionEl.parentElement?.insertBefore(uprootedVersion, versionEl.nextSibling);\n  } else {\n    versionEl.parentElement?.appendChild(uprootedVersion);\n  }\n}\n\n// --- Cleanup ---\n\nfunction cleanup(): void {\n  const elements = document.querySelectorAll(\"[data-uprooted]\");\n  for (const el of elements) el.remove();\n\n  if (rootContentPanel) {\n    rootContentPanel.style.display = \"\";\n    rootContentPanel = null;\n  }\n\n  uprootedContent = null;\n  activeUprootedItem = null;\n  injected = false;\n  debugEl?.remove();\n  debugEl = null;\n}\n", "/**\n * Settings Panel Plugin -- Injects an \"UPROOTED\" section into Root's\n * settings sidebar with pages for settings, plugins, and themes.\n */\n\nimport type { UprootedPlugin } from \"../../types/plugin.js\";\nimport { startObserving, stopObserving } from \"./panel.js\";\nimport type { PluginLoader } from \"../../core/pluginLoader.js\";\n\nexport default {\n  name: \"settings-panel\",\n  description: \"In-app settings panel injected into Root's settings sidebar\",\n  version: \"0.3.6-rc\",\n  authors: [{ name: \"Uprooted\" }],\n\n  css: undefined, // CSS is loaded from panel.css via the build system\n\n  start() {\n    const loader = window.__UPROOTED_LOADER__ as PluginLoader | undefined;\n    if (!loader) {\n      console.error(\"[Uprooted] Settings panel: no loader found on window.__UPROOTED_LOADER__\");\n      return;\n    }\n    startObserving(loader);\n  },\n\n  stop() {\n    stopObserving();\n  },\n} satisfies UprootedPlugin;\n", "/**\n * Link Embeds -- URL parsing, OpenGraph metadata fetching, and caching.\n */\n\nexport interface EmbedData {\n  url: string;\n  type: \"generic\" | \"youtube\";\n  provider?: string;\n  title?: string;\n  description?: string;\n  image?: string;\n  color?: string;\n  videoId?: string;\n}\n\nconst metadataCache = new Map<string, EmbedData | null>();\n\nconst FETCH_TIMEOUT = 5000;\n\n/**\n * Extract a YouTube video ID from common URL patterns.\n * Returns null if the URL is not a recognized YouTube link.\n */\nexport function parseYouTubeId(url: string): string | null {\n  try {\n    const u = new URL(url);\n    const host = u.hostname.replace(\"www.\", \"\");\n\n    if (host === \"youtube.com\" || host === \"m.youtube.com\") {\n      // /watch?v=ID\n      if (u.pathname === \"/watch\") {\n        return u.searchParams.get(\"v\");\n      }\n      // /embed/ID or /shorts/ID\n      const match = u.pathname.match(/^\\/(embed|shorts)\\/([^/?&]+)/);\n      if (match) return match[2];\n    }\n\n    // youtu.be/ID\n    if (host === \"youtu.be\") {\n      const id = u.pathname.slice(1).split(/[/?&]/)[0];\n      return id || null;\n    }\n  } catch {\n    // invalid URL\n  }\n  return null;\n}\n\n/**\n * Parse OpenGraph meta tags from raw HTML.\n */\nexport function parseOpenGraph(html: string): {\n  title?: string;\n  description?: string;\n  image?: string;\n  siteName?: string;\n  themeColor?: string;\n} {\n  const result: Record<string, string> = {};\n\n  // Match <meta property=\"og:...\" content=\"...\"> and <meta name=\"og:...\" content=\"...\">\n  // Also pick up theme-color meta tag.\n  // Bridge pattern explicitly skips complete HTML attributes (key=\"value\" pairs)\n  // to handle tags with extra attributes like itemProp=\"image\" or data-next-head=\"\"\n  // between the property and content attributes.\n  const attrBridge = `(?:\\\\s+[a-zA-Z_][\\\\w.:-]*\\\\s*=\\\\s*(?:\"[^\"]*\"|'[^']*'))*`;\n  const metaRegex = new RegExp(\n    `<meta\\\\s+(?:\\\\s*[a-zA-Z_][\\\\w.:-]*\\\\s*=\\\\s*(?:\"[^\"]*\"|'[^']*'))*\\\\s*(?:property|name)\\\\s*=\\\\s*[\"']([^\"']+)[\"']${attrBridge}\\\\s+content\\\\s*=\\\\s*[\"']([^\"']*)[\"'][^>]*/?>`,\n    \"gi\",\n  );\n\n  let match: RegExpExecArray | null;\n  while ((match = metaRegex.exec(html)) !== null) {\n    const [, key, value] = match;\n    result[key.toLowerCase()] = value;\n  }\n\n  // Also try reversed attribute order: content before property\n  const metaRegexReverse = new RegExp(\n    `<meta\\\\s+(?:\\\\s*[a-zA-Z_][\\\\w.:-]*\\\\s*=\\\\s*(?:\"[^\"]*\"|'[^']*'))*\\\\s*content\\\\s*=\\\\s*[\"']([^\"']*)[\"']${attrBridge}\\\\s+(?:property|name)\\\\s*=\\\\s*[\"']([^\"']+)[\"'][^>]*/?>`,\n    \"gi\",\n  );\n\n  while ((match = metaRegexReverse.exec(html)) !== null) {\n    const [, value, key] = match;\n    const k = key.toLowerCase();\n    if (!result[k]) result[k] = value;\n  }\n\n  return {\n    title: result[\"og:title\"],\n    description: result[\"og:description\"],\n    image: result[\"og:image\"],\n    siteName: result[\"og:site_name\"],\n    themeColor: result[\"theme-color\"],\n  };\n}\n\n/**\n * Fetch metadata for a URL and return an EmbedData object.\n * YouTube URLs use thumbnail patterns and oEmbed. Other URLs fetch HTML and parse OG tags.\n * Returns null on failure.\n */\nexport async function fetchMetadata(url: string): Promise<EmbedData | null> {\n  if (metadataCache.has(url)) {\n    return metadataCache.get(url)!;\n  }\n\n  try {\n    const videoId = parseYouTubeId(url);\n\n    if (videoId) {\n      const data = await fetchYouTubeMetadata(url, videoId);\n      metadataCache.set(url, data);\n      return data;\n    }\n\n    const data = await fetchGenericMetadata(url);\n    metadataCache.set(url, data);\n    return data;\n  } catch {\n    metadataCache.set(url, null);\n    return null;\n  }\n}\n\nasync function fetchYouTubeMetadata(\n  url: string,\n  videoId: string,\n): Promise<EmbedData> {\n  const data: EmbedData = {\n    url,\n    type: \"youtube\",\n    provider: \"YouTube\",\n    videoId,\n    image: `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`,\n    color: \"#FF0000\",\n  };\n\n  // Try oEmbed for the title\n  try {\n    const controller = new AbortController();\n    const timer = setTimeout(() => controller.abort(), FETCH_TIMEOUT);\n\n    const resp = await fetch(\n      `https://www.youtube.com/oembed?url=${encodeURIComponent(url)}&format=json`,\n      { signal: controller.signal },\n    );\n    clearTimeout(timer);\n\n    if (resp.ok) {\n      const json = (await resp.json()) as { title?: string; author_name?: string };\n      data.title = json.title;\n      if (json.author_name) data.description = json.author_name;\n    }\n  } catch {\n    // oEmbed failed -- thumbnail still works\n  }\n\n  return data;\n}\n\nasync function fetchGenericMetadata(url: string): Promise<EmbedData | null> {\n  const controller = new AbortController();\n  const timer = setTimeout(() => controller.abort(), FETCH_TIMEOUT);\n\n  const resp = await fetch(url, {\n    signal: controller.signal,\n    headers: { Accept: \"text/html\" },\n  });\n  clearTimeout(timer);\n\n  if (!resp.ok) return null;\n\n  const contentType = resp.headers.get(\"content-type\") ?? \"\";\n  if (!contentType.includes(\"text/html\")) return null;\n\n  // Read only first 50KB to avoid loading huge pages\n  const reader = resp.body?.getReader();\n  if (!reader) return null;\n\n  let html = \"\";\n  const decoder = new TextDecoder();\n  const MAX_BYTES = 50_000;\n\n  while (html.length < MAX_BYTES) {\n    const { done, value } = await reader.read();\n    if (done) break;\n    html += decoder.decode(value, { stream: true });\n  }\n  reader.cancel();\n\n  const og = parseOpenGraph(html);\n\n  // Need at least a title to show an embed\n  if (!og.title) {\n    // Fall back to <title> tag\n    const titleMatch = html.match(/<title[^>]*>([^<]+)<\\/title>/i);\n    if (titleMatch) og.title = titleMatch[1].trim();\n  }\n\n  if (!og.title) return null;\n\n  // Resolve relative image URLs\n  let image = og.image;\n  if (image && !image.startsWith(\"http\")) {\n    try {\n      image = new URL(image, url).href;\n    } catch {\n      image = undefined;\n    }\n  }\n\n  // Extract hostname for provider name\n  let provider = og.siteName;\n  if (!provider) {\n    try {\n      provider = new URL(url).hostname.replace(\"www.\", \"\");\n    } catch {\n      // leave undefined\n    }\n  }\n\n  return {\n    url,\n    type: \"generic\",\n    provider,\n    title: og.title,\n    description: og.description,\n    image,\n    color: og.themeColor,\n  };\n}\n\n/** Clear the metadata cache (used on plugin stop). */\nexport function clearCache(): void {\n  metadataCache.clear();\n}\n", "/**\r\n * Link Embeds -- DOM construction for Discord-style embed cards.\r\n */\r\n\r\nimport type { EmbedData } from \"./providers.js\";\r\n\r\n/** Truncate text to a maximum length, adding ellipsis if needed. */\r\nfunction truncate(text: string, max: number): string {\r\n  if (text.length <= max) return text;\r\n  return text.slice(0, max).trimEnd() + \"\\u2026\";\r\n}\r\n\r\n/** Sanitize text content to prevent HTML injection. */\r\nfunction textNode(text: string): Text {\r\n  return document.createTextNode(text);\r\n}\r\n\r\n/**\r\n * Create a Discord-style embed card for generic links.\r\n */\r\nexport function createEmbedCard(data: EmbedData): HTMLElement {\r\n  if (data.type === \"youtube\" && data.videoId) {\r\n    return createYouTubeEmbed(data);\r\n  }\r\n\r\n  const card = document.createElement(\"div\");\r\n  card.className = \"uprooted-embed\";\r\n  if (data.color) {\r\n    card.style.borderLeftColor = data.color;\r\n  }\r\n\r\n  const body = document.createElement(\"div\");\r\n  body.className = \"uprooted-embed-body\";\r\n\r\n  // Provider name\r\n  if (data.provider) {\r\n    const provider = document.createElement(\"div\");\r\n    provider.className = \"uprooted-embed-provider\";\r\n    provider.appendChild(textNode(data.provider));\r\n    if (data.color) provider.style.color = data.color;\r\n    body.appendChild(provider);\r\n  }\r\n\r\n  // Title (clickable link)\r\n  if (data.title) {\r\n    const title = document.createElement(\"a\");\r\n    title.className = \"uprooted-embed-title\";\r\n    title.href = data.url;\r\n    title.target = \"_blank\";\r\n    title.rel = \"noopener noreferrer\";\r\n    title.appendChild(textNode(data.title));\r\n    body.appendChild(title);\r\n  }\r\n\r\n  // Description\r\n  if (data.description) {\r\n    const desc = document.createElement(\"div\");\r\n    desc.className = \"uprooted-embed-description\";\r\n    desc.appendChild(textNode(truncate(data.description, 250)));\r\n    body.appendChild(desc);\r\n  }\r\n\r\n  card.appendChild(body);\r\n\r\n  // Thumbnail (right-aligned for generic embeds)\r\n  if (data.image) {\r\n    const thumbWrap = document.createElement(\"div\");\r\n    thumbWrap.className = \"uprooted-embed-thumbnail\";\r\n\r\n    const img = document.createElement(\"img\");\r\n    img.src = data.image;\r\n    img.alt = data.title ?? \"\";\r\n    img.loading = \"lazy\";\r\n    img.onerror = () => thumbWrap.remove();\r\n\r\n    thumbWrap.appendChild(img);\r\n    card.appendChild(thumbWrap);\r\n  }\r\n\r\n  return card;\r\n}\r\n\r\n/**\r\n * Create a YouTube-specific embed card with thumbnail-to-iframe player.\r\n */\r\nfunction createYouTubeEmbed(data: EmbedData): HTMLElement {\r\n  const card = document.createElement(\"div\");\r\n  card.className = \"uprooted-embed uprooted-embed--youtube\";\r\n  if (data.color) {\r\n    card.style.borderLeftColor = data.color;\r\n  }\r\n\r\n  const body = document.createElement(\"div\");\r\n  body.className = \"uprooted-embed-body\";\r\n\r\n  // Provider\r\n  const provider = document.createElement(\"div\");\r\n  provider.className = \"uprooted-embed-provider\";\r\n  provider.appendChild(textNode(\"YouTube\"));\r\n  provider.style.color = \"#FF0000\";\r\n  body.appendChild(provider);\r\n\r\n  // Title\r\n  if (data.title) {\r\n    const title = document.createElement(\"a\");\r\n    title.className = \"uprooted-embed-title\";\r\n    title.href = data.url;\r\n    title.target = \"_blank\";\r\n    title.rel = \"noopener noreferrer\";\r\n    title.appendChild(textNode(data.title));\r\n    body.appendChild(title);\r\n  }\r\n\r\n  // Channel name as description\r\n  if (data.description) {\r\n    const desc = document.createElement(\"div\");\r\n    desc.className = \"uprooted-embed-description\";\r\n    desc.appendChild(textNode(data.description));\r\n    body.appendChild(desc);\r\n  }\r\n\r\n  card.appendChild(body);\r\n\r\n  // Video thumbnail with play button overlay\r\n  const videoWrap = document.createElement(\"div\");\r\n  videoWrap.className = \"uprooted-embed-video\";\r\n\r\n  const img = document.createElement(\"img\");\r\n  img.className = \"uprooted-embed-video-thumb\";\r\n  img.src = data.image ?? `https://img.youtube.com/vi/${data.videoId}/hqdefault.jpg`;\r\n  img.alt = data.title ?? \"YouTube video\";\r\n  img.loading = \"lazy\";\r\n\r\n  const playBtn = document.createElement(\"div\");\r\n  playBtn.className = \"uprooted-embed-yt-play\";\r\n\r\n  // SVG play icon\r\n  playBtn.innerHTML =\r\n    '<svg viewBox=\"0 0 68 48\" width=\"68\" height=\"48\">' +\r\n    '<path d=\"M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55C3.97 2.33 2.27 4.81 1.48 7.74.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z\" fill=\"#FF0000\"/>' +\r\n    '<path d=\"M45 24L27 14v20\" fill=\"#fff\"/>' +\r\n    \"</svg>\";\r\n\r\n  videoWrap.appendChild(img);\r\n  videoWrap.appendChild(playBtn);\r\n\r\n  // Click to swap thumbnail with iframe player\r\n  videoWrap.addEventListener(\"click\", () => {\r\n    const iframe = document.createElement(\"iframe\");\r\n    iframe.className = \"uprooted-embed-yt-iframe\";\r\n    iframe.src = `https://www.youtube.com/embed/${data.videoId}?autoplay=1`;\r\n    iframe.allow = \"autoplay; encrypted-media\";\r\n    iframe.allowFullscreen = true;\r\n    iframe.setAttribute(\"frameborder\", \"0\");\r\n\r\n    videoWrap.replaceChildren(iframe);\r\n  });\r\n\r\n  card.appendChild(videoWrap);\r\n\r\n  return card;\r\n}\r\n", "/**\n * Link Embeds Plugin -- Discord-style link previews for URLs in chat.\n *\n * Watches for new <a> elements via MutationObserver and renders rich embed\n * cards with OpenGraph metadata. YouTube URLs get special inline player embeds.\n */\n\nimport type { UprootedPlugin } from \"../../types/plugin.js\";\nimport { fetchMetadata, clearCache } from \"./providers.js\";\nimport { createEmbedCard } from \"./embeds.js\";\n\nconst LINK_PATTERN = /^https?:\\/\\//;\n\nlet observer: MutationObserver | null = null;\nconst processedLinks = new WeakSet<HTMLAnchorElement>();\n\nfunction getPluginConfig(): {\n  youtube: boolean;\n  websites: boolean;\n  maxEmbedsPerMessage: number;\n} {\n  const config =\n    window.__UPROOTED_SETTINGS__?.plugins?.[\"link-embeds\"]?.config;\n  return {\n    youtube: (config?.youtube as boolean) ?? true,\n    websites: (config?.websites as boolean) ?? true,\n    maxEmbedsPerMessage: (config?.maxEmbedsPerMessage as number) ?? 3,\n  };\n}\n\n/** Count existing embeds within the closest message-like ancestor. */\nfunction countEmbedsInContext(anchor: HTMLAnchorElement): number {\n  // Walk up to find a reasonable message container (a few levels up from the link)\n  let container: HTMLElement | null = anchor.parentElement;\n  for (let i = 0; i < 5 && container; i++) {\n    container = container.parentElement;\n  }\n  if (!container) container = anchor.parentElement;\n  return container?.querySelectorAll(\".uprooted-embed\").length ?? 0;\n}\n\n/** Find the best insertion point for the embed card. */\nfunction findInsertionPoint(anchor: HTMLAnchorElement): {\n  parent: Node;\n  ref: Node | null;\n} {\n  // Try to insert after the link's closest block-level parent\n  let block: HTMLElement | null = anchor;\n  while (block && block !== document.body) {\n    const display = getComputedStyle(block).display;\n    if (display === \"block\" || display === \"flex\" || display === \"grid\") {\n      return { parent: block.parentNode!, ref: block.nextSibling };\n    }\n    block = block.parentElement;\n  }\n  // Fallback: insert directly after the anchor\n  return { parent: anchor.parentNode!, ref: anchor.nextSibling };\n}\n\nasync function processLink(anchor: HTMLAnchorElement): Promise<void> {\n  if (processedLinks.has(anchor)) return;\n  processedLinks.add(anchor);\n\n  const href = anchor.href;\n  if (!LINK_PATTERN.test(href)) return;\n\n  // Skip links inside Uprooted's own UI\n  if (anchor.closest('[id^=\"uprooted-\"], [data-uprooted]')) return;\n\n  const config = getPluginConfig();\n\n  // Check embed type against settings\n  const isYouTube = /(?:youtube\\.com|youtu\\.be)/.test(href);\n  if (isYouTube && !config.youtube) return;\n  if (!isYouTube && !config.websites) return;\n\n  // Respect max embeds per message\n  if (countEmbedsInContext(anchor) >= config.maxEmbedsPerMessage) return;\n\n  const data = await fetchMetadata(href);\n  if (!data) return;\n\n  // Verify the anchor is still in the DOM (may have been removed during fetch)\n  if (!anchor.isConnected) return;\n\n  // Re-check limit after async gap\n  if (countEmbedsInContext(anchor) >= config.maxEmbedsPerMessage) return;\n\n  const card = createEmbedCard(data);\n  const { parent, ref } = findInsertionPoint(anchor);\n\n  try {\n    parent.insertBefore(card, ref);\n  } catch {\n    // Fallback if insertion point is invalid\n    anchor.parentNode?.insertBefore(card, anchor.nextSibling);\n  }\n}\n\nfunction scanForLinks(root: Node): void {\n  const anchors =\n    root instanceof HTMLElement\n      ? root.querySelectorAll<HTMLAnchorElement>(\"a[href]\")\n      : [];\n\n  for (const anchor of anchors) {\n    if (!processedLinks.has(anchor) && LINK_PATTERN.test(anchor.href)) {\n      processLink(anchor);\n    }\n  }\n\n  // Also check if the root itself is an anchor\n  if (\n    root instanceof HTMLAnchorElement &&\n    root.href &&\n    LINK_PATTERN.test(root.href)\n  ) {\n    processLink(root);\n  }\n}\n\nfunction onMutations(mutations: MutationRecord[]): void {\n  for (const mutation of mutations) {\n    for (const node of mutation.addedNodes) {\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        scanForLinks(node);\n      }\n    }\n  }\n}\n\nexport default {\n  name: \"link-embeds\",\n  description: \"Discord-style link previews for URLs in chat\",\n  version: \"0.3.6-rc\",\n  authors: [{ name: \"Uprooted\" }],\n\n  settings: {\n    youtube: {\n      type: \"boolean\",\n      default: true,\n      description: \"Show YouTube video embeds\",\n    },\n    websites: {\n      type: \"boolean\",\n      default: true,\n      description: \"Show website link previews\",\n    },\n    maxEmbedsPerMessage: {\n      type: \"number\",\n      default: 3,\n      min: 1,\n      max: 10,\n      description: \"Maximum embeds per message\",\n    },\n  },\n\n  start() {\n    observer = new MutationObserver(onMutations);\n    observer.observe(document.body, { childList: true, subtree: true });\n\n    // Process existing links already in the DOM\n    scanForLinks(document.body);\n\n    console.log(\"[Uprooted] Link embeds started\");\n  },\n\n  stop() {\n    if (observer) {\n      observer.disconnect();\n      observer = null;\n    }\n\n    // Remove all embed cards from the DOM\n    document\n      .querySelectorAll(\".uprooted-embed\")\n      .forEach((el) => el.remove());\n\n    clearCache();\n\n    console.log(\"[Uprooted] Link embeds stopped\");\n  },\n} satisfies UprootedPlugin;\n", "/**\n * Preload -- Entry point injected into Root's Chromium context.\n *\n * This script runs before Root's own bundles load. It:\n *   1. Reads settings from window.__UPROOTED_SETTINGS__\n *   2. Installs bridge proxies on __nativeToWebRtc / __webRtcToNative\n *   3. Initializes the plugin loader\n *   4. Starts all enabled plugins\n */\n\nimport { PluginLoader } from \"./pluginLoader.js\";\nimport { installBridgeProxy, setPluginLoader } from \"../api/bridge.js\";\nimport { injectCss, removeCss } from \"../api/css.js\";\nimport sentryBlockerPlugin from \"../plugins/sentry-blocker/index.js\";\nimport silentTypingPlugin from \"../plugins/silent-typing/index.js\";\nimport themesPlugin from \"../plugins/themes/index.js\";\nimport settingsPanelPlugin from \"../plugins/settings-panel/index.js\";\nimport linkEmbedsPlugin from \"../plugins/link-embeds/index.js\";\n\ndeclare const __UPROOTED_VERSION__: string;\n\nconst VERSION = typeof __UPROOTED_VERSION__ !== \"undefined\" ? __UPROOTED_VERSION__ : \"dev\";\n\nfunction main(): void {\n  try {\n    const settings = window.__UPROOTED_SETTINGS__;\n\n    if (!settings?.enabled) {\n      console.log(\"[Uprooted] Disabled in settings, skipping initialization.\");\n      return;\n    }\n\n    console.log(`[Uprooted] v${VERSION} -- initializing`);\n\n    // Set version global\n    window.__UPROOTED_VERSION__ = VERSION;\n\n    // Install bridge proxies (wraps globals with ES6 Proxy)\n    installBridgeProxy();\n\n    // Initialize plugin loader\n    const loader = new PluginLoader(settings);\n\n    // Expose loader globally for settings panel\n    window.__UPROOTED_LOADER__ = loader;\n\n    // Wire loader into bridge proxy so plugin events fire\n    setPluginLoader(loader);\n\n    // Register built-in plugins (sentry-blocker first so fetch is wrapped earliest)\n    loader.register(sentryBlockerPlugin);\n    loader.register(themesPlugin);\n    loader.register(settingsPanelPlugin);\n    loader.register(linkEmbedsPlugin);\n    loader.register(silentTypingPlugin);\n\n    // Inject global custom CSS if set\n    if (settings.customCss) {\n      injectCss(\"uprooted-custom\", settings.customCss);\n    }\n\n    // Start enabled plugins\n    loader.startAll().then(() => {\n      console.log(`[Uprooted] All plugins started.`);\n    });\n  } catch (err) {\n    // Visible error banner since Root has no DevTools\n    const banner = document.createElement(\"div\");\n    banner.id = \"uprooted-error\";\n    banner.style.cssText =\n      \"position:fixed;top:0;left:0;right:0;z-index:999999;padding:12px 16px;\" +\n      \"background:#dc2626;color:#fff;font:14px/1.4 monospace;white-space:pre-wrap;\" +\n      \"max-height:40vh;overflow:auto;\";\n    banner.textContent = `[Uprooted] Fatal: ${err instanceof Error ? err.stack ?? err.message : String(err)}`;\n    (document.body ?? document.documentElement).appendChild(banner);\n    console.error(\"[Uprooted] Fatal error during init:\", err);\n  }\n}\n\n// Run after DOM is ready (but before Root's main bundles in most cases)\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", main);\n} else {\n  main();\n}\n"],
  "mappings": "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",
  "names": ["loader", "originalFetch", "originalXHROpen", "themes_default", "debounceTimer", "loader", "badge", "pluginLoader", "loader", "data", "observer", "loader", "themes_default"]
}
